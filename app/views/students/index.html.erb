<link rel="stylesheet" href="/assets/theme_css/sweetalert/sweetalert.css">

<div class="wrapper">
  <%= render 'layouts/header'%>
  <%= render 'layouts/left_sidebar'%>
  <%= render 'layouts/right_sidebar'%>
  <section class="section-container">
    <div class="content-wrapper">
      <div class="content-heading">
        <div>
          Students
          <ol class="breadcrumb breadcrumb px-0 pb-0">
            <li class="breadcrumb-item">
              <a href="/levels"><%= render_breadcrumbs :separator => ' / ' %></a>
            </li>
          </ol>
        </div>
        <div class="ml-auto">
          <%= link_to(new_student_path,class: 'btn btn-labeled btn-success mb-2') do %>
             <span class="btn-label"><i class="fa fa-plus"></i></span>New Student
          <% end %>
          <a class="btn btn-labeled btn-primary mb-2" href="import.html"><span class="btn-label"><i class="fa fa-upload"></i></span>Import Students</a>
        </div>
      </div>
      <div class="row">
        <div class="col-xl-2">
          <div class="ml-auto">
            <div class="input-group float-right">
              <div class="desktop-view">
                <select class="custom-select" id="student_batch" disabled = "true">
                  <option value="0">Bulk action</option>
                  <option value="1">Give Permission</option>
                  <option value="2">Send Email</option>
                  <option value="3">Send SMS</option>
                  <option value="3">Delete</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        <div class="col-xl-10">
          <div class="desktop-view">
            <div id="student_status_id">
              <%= render "student_status"%>
            </div>
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-xl-4 hide-on-desktop">
          <div class="card card-default">
            <div class="card-body">
              <p class="lead">Filters</p>
                <%= render 'filter_student'%>
            </div>
          </div>
        </div>
        <div class="mobile-view">
          <select class="custom-select" id="student_batch" disabled = "true">
            <option value="0">Bulk action</option>
            <option value="1">Give Permission</option>
            <option value="2">Send Email</option>
            <option value="3">Send SMS</option>
            <option value="3">Delete</option>
          </select>
        </div>
        <div class="mobile-view">
          <div id="student_status_id">
            <%= render "student_status"%>
          </div>
        </div>
        <div class="col-xl-8">
          <div class="card card-default">
            <div id = "student_list_table">
              <%= render 'student_list'%>
            </div>
          </div>
        </div>
        <div class="col-xl-4 hide-on-mobile">
          <div class="card card-default">
            <div class="card-body">
              <p class="lead">Filters</p>
                <%= render 'filter_student'%>
            </div>
          </div>
        </div>
    </div>
  </section>
  <%= render '/layouts/footer'%>
</div>
<script src="/assets/theme_js/sweetalert/sweetalert.min.js"></script>
<!-- Email Modal-->
<div class="modal fade" id="emailModal" tabindex="-1" role="dialog" aria-labelledby="emailModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="emailModalLabel">Send Email</h4>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form class="form-horizontal">
          <fieldset>
            <div class="form-group row">
              <label class="col-xl-3 col-form-label">Subject</label>
              <div class="col-xl-8">
                <input class="form-control" type="text" placeholder="Subject">
              </div>
            </div>
          </fieldset>
          <fieldset>
            <div class="form-group row">
              <label class="col-xl-3 col-form-label">Message</label>
              <div class="col-xl-8">
                <textarea class="form-control" rows="5"></textarea>
              </div>
            </div>
          </fieldset>
          <fieldset>
            <div class="form-group row">
              <label class="col-xl-3 col-form-label"><em class="fa-2x mr-2 fa fa-info-circle text-info"></em></label>
              <div class="col-xl-8">
                <p> An email will be sent to all the selected parents.</p>
              </div>
            </div>
          </fieldset>
        </form>
      </div>
      <div class="modal-footer card-footer">
        <button class="btn btn-danger" type="button" data-dismiss="modal">Close</button>
        <button class="btn btn-primary" type="button">Send</button>
      </div>
    </div>
  </div>
</div>
<!-- sms Modal-->
<div class="modal fade" id="smsModal" tabindex="-1" role="dialog" aria-labelledby="smsModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="smsModalLabel">Send SMS</h4>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form class="form-horizontal">
          <fieldset>
            <div class="form-group row">
              <label class="col-xl-3 col-form-label">Message</label>
              <div class="col-xl-8">
                <textarea class="form-control" rows="5"></textarea>
              </div>
            </div>
          </fieldset>
          <fieldset>
            <div class="form-group row">
              <label class="col-xl-3 col-form-label"><em class="fa-2x mr-2 fa fa-info-circle text-info"></em></label>
              <div class="col-xl-8">
                <p> A total of 160 charaters are allowed.</p>
              </div>
            </div>
          </fieldset>
        </form>
      </div>
      <div class="modal-footer card-footer">
        <button class="btn btn-danger" type="button" data-dismiss="modal">Close</button>
        <button class="btn btn-primary" type="button">Send</button>
      </div>
    </div>
  </div>
</div>
<!-- GDPR Modal-->
<div class="modal fade" id="gdprModal" tabindex="-1" role="dialog" aria-labelledby="gdprModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="gdprModalLabel">Permission</h4>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form class="form-horizontal">
          <fieldset>
            <div class="form-group row">
              <label class="col-xl-2 col-form-label"><em class="fa-4x mr-4 fa fa-info-circle text-info"></em></label>
              <div class="col-xl-8">
                <p> You are about to give permission to the selected students to view and amend their data. An email will be sent with a link. </p>
                <p> If you're not sure, please click on Close. </p>
              </div>
            </div>
          </fieldset>
        </form>
      </div>
      <div class="modal-footer card-footer">
        <button class="btn btn-danger" type="button" data-dismiss="modal">Close</button>
        <button class="btn btn-primary" type="button">Give</button>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  $( document ).ready(function() {
   $( "#student_batch" ).change(function() {
     var actions = this.value;
     // alert(actions);
     if(actions == 1)
     $('#gdprModal').modal('show')
  if(actions == 2)
     $('#emailModal').modal('show')
  if(actions == 3)
     $('#smsModal').modal('show')
   });
  });
</script>
<script src="/assets/theme_js/js/app.js"></script>
<script>
  $(document).on('click','#student_main_checkbox',function(){
    if($(this).is(':checked')){
      $('#student_batch').prop('disabled', false)
    }else {
      $('#student_batch').prop('disabled', true)
    }

  })
  $(document).on('click','#student_check_box',function(){
    if($(this).is(':checked')){
      $('#student_batch').prop('disabled', false)
    }else {
      $('#student_batch').prop('disabled', true)
    }
  })

  // $(document).on('click','#enrolled_status',function(e){
  //   e.preventDefault();
  //   debugger
  //   $.ajax({
  //     type: "get",
  //     url: "/students",
  //     data:{status: $('#enrolled_status').val()}
  //   })

  // })
  $(".mb-1").click(function() {
   $(this).addClass('active');
   $(this).siblings("input").removeClass("active");
  });
</script>
<style type="text/css">
  input.btn-outline-success.active {
    background: #27c24c !important;
  }
  input.btn-outline-primary.active{
    background: #5d9cec !important;
  }
  input.btn-outline-warning.active{
    background: #ff902b !important;
  }
  input.btn-outline-info.active{
    background: #23b7e5 !important;
  }
  input.btn-outline-danger.active{
    background: #f05050 !important;
  }
</style>

